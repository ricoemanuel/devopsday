<br>
<div class="buscador">
    <mat-form-field appearance="outline">
        <mat-label>Escriba su búsqueda</mat-label>
        <input matInput (keyup)="applyFilter($event)" #input>
    </mat-form-field>
</div>

<div class="centrar">
    <button class="btn btn-success"  (click)="exporter.exportTable('xlsx')">Exportar</button>
</div>
<div class="mat-elevation-z8 overflow-auto col-md-11 datatable">
    <table matTableExporter #exporter="matTableExporter" mat-table [dataSource]="dataSource" matSort>

        <ng-container matColumnDef="QR">
            <mat-header-cell *matHeaderCellDef> Código qr </mat-header-cell>
            <mat-cell *matCellDef="let elemento">
                <div class="qr">
                    <p (click)="openModal(template)">{{elemento.id}}</p>
                </div>

            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="Evento">
            <mat-header-cell *matHeaderCellDef> Evento </mat-header-cell>
            <mat-cell *matCellDef="let elemento">
                <p style="cursor: pointer;"> {{
                    elemento.eventoData}}</p>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="Valor">
            <mat-header-cell *matHeaderCellDef> Valor </mat-header-cell>
            <mat-cell *matCellDef="let elemento"> {{
                ((elemento.value)/100).toLocaleString('en-US', {
                style: 'currency', currency: 'USD' })}}
            </mat-cell>
        </ng-container>
        <ng-container matColumnDef="Nombre">
            <mat-header-cell *matHeaderCellDef> Nombre </mat-header-cell>
            <mat-cell *matCellDef="let elemento"> {{

                (elemento.transaccion.transaction.customer_data.full_name)
               }}
            </mat-cell>
        </ng-container>
       
        <ng-container matColumnDef="transaccion">
            <mat-header-cell *matHeaderCellDef>Número de transacción</mat-header-cell>
            <mat-cell *matCellDef="let elemento">
                {{elemento.transaccion.transaction.id}}
            </mat-cell>
        </ng-container>
        <ng-container matColumnDef="fecha">
            <mat-header-cell *matHeaderCellDef>Fecha de transacción</mat-header-cell>
            <mat-cell *matCellDef="let elemento">
                {{formatfecha(elemento.transaccion.transaction.finalized_at)}}
            </mat-cell>
        </ng-container>
        <ng-container matColumnDef="celular">
            <mat-header-cell *matHeaderCellDef>Celular</mat-header-cell>
            <mat-cell *matCellDef="let elemento">
                {{elemento.transaccion.data?elemento.transaccion.data.transaction.customer_data.phone_number:elemento.transaccion.transaction.customer_data.phone_number}}
            </mat-cell>
        </ng-container>
        <ng-container matColumnDef="correo">
            <mat-header-cell *matHeaderCellDef>Correo</mat-header-cell>
            <mat-cell *matCellDef="let elemento">
                {{elemento.transaccion.transaction.customer_email}}
            </mat-cell>
        </ng-container>
        <ng-container matColumnDef="acciones">
            <mat-header-cell *matHeaderCellDef>Correo</mat-header-cell>
            <mat-cell *matCellDef="let elemento">
                <div class="col" *ngIf="elemento.estado==='pagando'"><mat-icon style="cursor: pointer;" (click)="verificar(elemento.link)">cached</mat-icon></div>
            </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>

    </table>

    <mat-paginator [pageSizeOptions]="[5,10,25, 100]" aria-label="Select page of users"></mat-paginator>
</div>
<ng-template #template>
    <div class="codigo">
        <img [src]="generateQRCodeBase64(baseSeleccionada)" alt="">
    </div>
</ng-template>